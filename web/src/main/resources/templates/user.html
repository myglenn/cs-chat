<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>사원 관리 - demo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/user.css">
</head>
<body data-page="user">
<div class="loading-overlay">
    <div class="loading-spinner"></div>
</div>
<th:block th:replace="layout/header :: headerFragment"></th:block>
<th:block th:replace="layout/sidebar :: sidebarFragment"></th:block>


<!-- 메인 콘텐츠 -->
<main id="mainContent" class="main-content">
    <div class="page-container">
        <!-- 검색 및 등록 버튼 영역 -->
        <div class="page-header">
            <div class="search-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                     class="search-icon">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="m21 21-4.3-4.3"></path>
                </svg>
                <input
                        type="text"
                        id="searchInput"
                        class="search-input"
                        placeholder="이름, 아이디로 검색"
                >
                <button class="search-btn" id="searchButton" aria-label="검색">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.3-4.3"></path>
                    </svg>
                </button>
            </div>
            <button class="btn btn-primary" id='openUserModalBtn'>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                     stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M5 12h14"></path>
                    <path d="M12 5v14"></path>
                </svg>
                등록
            </button>
        </div>

        <!-- PC 테이블 뷰 -->
        <div id="tableView" class="table-view">
            <div class="table-actions">
                <div class="flex items-center gap-2">
                    <span class="selected-count"></span>
                </div>
                <div class="flex items-center gap-2">
                    <select class="form-select" id="itemsPerPage" onchange="changeItemsPerPage(this.value)"
                            style="width: auto; padding: 0.375rem 0.75rem;">
                        <option value="5">5개씩 보기</option>
                        <option value="10">10개씩 보기</option>
                        <option value="20">20개씩 보기</option>
                        <option value="50">50개씩 보기</option>
                    </select>
                </div>
            </div>
            <div class="table-container">
                <table class="table" id="userTable">
                    <thead>
                    <tr>
                        <th style="width: 50px;">
                            <input type="checkbox" class="checkbox" id="selectAll"
                                   onchange="toggleSelectAll(this.checked)">
                        </th>
                        <th>이름</th>
                        <th>아이디</th>
                        <th>등록일</th>
                    </tr>
                    </thead>
                    <tbody id="userTableBody">
                    <!-- 데이터가 여기에 동적으로 추가됩니다 -->
                    </tbody>
                </table>
            </div>
            <div id="pagination" class="mt-4"></div>
        </div>

        <!-- 모바일 카드 뷰 -->
        <div id="cardView" class="card-view">
            <!-- 전체 선택 체크박스 -->
            <div style="display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem; background-color: var(--muted); border-radius: var(--radius-lg); margin-bottom: 1rem;">
                <input type="checkbox" class="checkbox" id="selectAllMobile" onchange="toggleSelectAll(this.checked)">
                <span style="font-size: 0.875rem; font-weight: var(--font-weight-medium);">전체 선택</span>
                <span class="selected-count" style="font-size: 0.875rem; color: var(--muted-foreground);"></span>
            </div>

            <div id="userCards">
                <!-- 카드가 여기에 동적으로 추가됩니다 -->
            </div>
            <div id="paginationMobile" class="mt-4"></div>
        </div>
    </div>
</main>

<!-- FAB (Floating Action Button) -->
<div class="fab-container" id="fabContainer">
    <button class="fab-button" id="fabButton" aria-label="작업">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M5 12h14"></path>
            <path d="M12 5v14"></path>
        </svg>
    </button>
    <div class="fab-menu" id="fabMenu">
        <button class="fab-menu-item" data-action="openUserModal">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                <circle cx="9" cy="7" r="4"></circle>
                <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
            <span>사원 등록</span>
        </button>
    </div>
</div>

<!-- 토스트 알림 컨테이너 -->
<div id="toastContainer" class="toast-container"></div>

<!-- 일괄 처리 모달 -->
<div id="bulkActionModal" class="bulk-action-modal">
    <div class="bulk-action-header">
        <span class="bulk-action-title" id="bulkActionTitle">0개 항목 선택됨</span>
        <button class="bulk-action-close" onclick="closeBulkActionModal()">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 6 6 18"></path>
                <path d="m6 6 12 12"></path>
            </svg>
        </button>
    </div>
    <div class="bulk-action-buttons">
        <button class="btn btn-sm btn-destructive" onclick="bulkDeleteUsers()"
                style="flex: 1; display: flex; align-items: center; justify-content: center; gap: 0.25rem;">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                 stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 6h18"></path>
                <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
            </svg>
            일괄 삭제
        </button>
    </div>
</div>

<script src="/js/cfg.js"></script>
<script src="/js/common.js"></script>
<script src="/js/common_api.js"></script>
<script src="/js/user.js"></script>
</body>
</html>