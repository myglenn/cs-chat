<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>대리점 관리 - demo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <link rel="stylesheet" href="/css/common.css">
    <link rel="stylesheet" href="/css/agency.css">
</head>
<body data-page="agency" data-loading="true">
<div class="loading-overlay">
    <div class="loading-spinner"></div>
</div>
<th:block th:replace="layout/header :: headerFragment"></th:block>
<th:block th:replace="layout/sidebar :: sidebarFragment"></th:block>
<!-- 메인 콘텐츠 -->
<main id="mainContent" class="main-content">
    <div class="page-container">
        <!-- 검색 및 등록 버튼 영역 -->
        <div class="page-header">
            <div class="search-wrapper" id="searchWrapper">
                <input
                        type="text"
                        id="searchInput"
                        class="search-input"
                        placeholder="대리점명 또는 대리점ID로 검색"
                />
                <button class="search-btn" id='searchButton' aria-label="검색"></button>
            </div>
            <button class="btn btn-primary" onclick="openAgencyModal()">
                등록
            </button>
        </div>

        <!-- PC 테이블 뷰 -->
        <div id="tableView" class="table-view">
            <div class="table-actions">
                <div class="flex items-center gap-2">
                    <span class="selected-count"></span>
                </div>
                <div class="flex items-center gap-2">
                    <select class="form-select" id="itemsPerPage" onchange="changeItemsPerPage(this.value)"
                            style="width: auto; padding: 0.375rem 0.75rem;">
                        <option value="5">5개씩 보기</option>
                        <option value="10">10개씩 보기</option>
                        <option value="20">20개씩 보기</option>
                        <option value="50">50개씩 보기</option>
                    </select>
                </div>
            </div>
            <div class="table-container">
                <table class="table" id="agencyTable">
                    <thead>
                    <tr>
                        <th style="width: 50px;">
                            <input type="checkbox" class="checkbox" id="selectAll"
                                   onchange="toggleSelectAll(this.checked)">
                        </th>
                        <th>대리점명</th>
                        <th>관리자ID</th>
                        <th>주소</th>
                        <th>사업자등록번호</th>
                        <th>등록일</th>
                    </tr>
                    </thead>
                    <tbody id="agencyTableBody">
                    <!-- 데이터가 여기에 동적으로 추가됩니다 -->
                    </tbody>
                </table>
            </div>
            <div id="pagination" class="mt-4"></div>
        </div>

        <!-- 모바일 카드 뷰 -->
        <div id="cardView" class="card-view">
            <!-- 전체 선택 체크박스 -->
            <div style="display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem; background-color: var(--muted); border-radius: var(--radius-lg); margin-bottom: 1rem;">
                <input type="checkbox" class="checkbox" id="selectAllMobile" onchange="toggleSelectAll(this.checked)">
                <span style="font-size: 0.875rem; font-weight: var(--font-weight-medium);">전체 선택</span>
                <span class="selected-count" style="font-size: 0.875rem; color: var(--muted-foreground);"></span>
            </div>

            <div id="agencyCards">
                <!-- 카드가 여기에 동적으로 추가됩니다 -->
            </div>
            <div id="paginationMobile" class="mt-4"></div>
        </div>
    </div>
</main>

<!-- FAB (Floating Action Button) -->
<div class="fab-container" id="fabContainer">
    <button class="fab-button" id="fabButton" aria-label="작업"></button>
    <div class="fab-menu" id="fabMenu">
        <button class="fab-menu-item" data-action="openAgencyModal">
            <span>대리점 등록</span>
        </button>
    </div>
</div>

<!-- 토스트 알림 컨테이너 -->
<div id="toastContainer" class="toast-container"></div>

<!-- 일괄 처리 모달 -->
<div id="bulkActionModal" class="bulk-action-modal">
    <div class="bulk-action-header">
        <span class="bulk-action-title" id="bulkActionTitle">0개 항목 선택됨</span>
        <button class="bulk-action-close" onclick="closeBulkActionModal()">
        </button>
    </div>
    <div class="bulk-action-buttons">
        <button class="btn btn-sm btn-destructive" onclick="bulkDeleteAgencies()"
                style="flex: 1; display: flex; align-items: center; justify-content: center; gap: 0.25rem;">
            일괄 삭제
        </button>
    </div>
</div>
<script src="/js/cfg.js"></script>
<script src="/js/common.js"></script>
<script src="/js/common_api.js"></script>
<script src="/js/agency.js"></script>
</body>
</html>

