### =================================================
### API 테스트를 위한 변수 설정
### =================================================
#-- 서버 주소 (로컬 환경) --#
@baseUrl = http://localhost:8080

#-- 토큰 변수 (로그인 후 자동으로 채워짐) --#
@superAdminAccessToken =
@agencyAdminAccessToken =


### =================================================
### 1. 인증 API (Authentication) - (필수 선행)
### =================================================

### [SUPER_ADMIN] 로그인
# @name loginSuperAdmin
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "loginId": "admin",
  "password": "your_super_admin_password"
}
> {% client.global.set("superAdminAccessToken", response.body.accessToken); %}

### [AGENCY_ADMIN] 로그인
# @name loginAgencyAdmin
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "loginId": "agency",
  "password": "your_agency_admin_password"
}
> {% client.global.set("agencyAdminAccessToken", response.body.accessToken); %}


### =================================================
### 2. 채널 관리 (본사 담당자) - ChnAdmController
### =================================================
# (반드시 [SUPER_ADMIN] 로그인 먼저 실행!)

### [ADMIN] 신규 채널 생성 (여러 대리점 참여)
POST {{baseUrl}}/api/admin/channels
Content-Type: application/json
Authorization: Bearer {{superAdminAccessToken}}

{
  "title": "본사 공지 채널",
  "category": "NOTICE",
  "agcIds": [1, 2, 3]
}

### [ADMIN] 모든 채널 목록 조회
GET {{baseUrl}}/api/admin/channels?page=0&size=10
Authorization: Bearer {{superAdminAccessToken}}

### [ADMIN] 채널 상담 완료 처리 (ID: 1)
PUT {{baseUrl}}/api/admin/channels/1/close
Content-Type: application/json
Authorization: Bearer {{superAdminAccessToken}}

{
  "category": "AS_COMPLETED"
}


### =================================================
### 3. 채널 관리 (대리점 담당자) - ChnAgcController
### =================================================
# (반드시 [AGENCY_ADMIN] 로그인 먼저 실행!)

### [AGENCY] 신규 채널 생성
# (참고: agcIds를 보내도 서비스단에서 자기 소속으로 덮어쓰므로 의미 없음)
POST {{baseUrl}}/api/agency/channels
Content-Type: application/json
Authorization: Bearer {{agencyAdminAccessToken}}

{
  "title": "대리점 긴급 문의",
  "category": "URGENT"
}

### [AGENCY] 내 대리점 참여 채널 목록 조회
GET {{baseUrl}}/api/agency/channels?page=0&size=10
Authorization: Bearer {{agencyAdminAccessToken}}

### [AGENCY] 내 대리점 참여 채널 상세 조회 (ID: 1)
# (주의: ID 1번 채널에 이 대리점이 참여하고 있을 때만 성공)
GET {{baseUrl}}/api/agency/channels/1
Authorization: Bearer {{agencyAdminAccessToken}}


### =================================================
### 4. 메시지(채팅) API - (참고용)
### =================================================

### [참고] 과거 메시지 목록 조회 (REST API)
# (이 기능은 별도의 REST 컨트롤러를 만들어야 합니다)
GET {{baseUrl}}/api/channels/1/messages?page=0&size=20
Authorization: Bearer {{superAdminAccessToken}}